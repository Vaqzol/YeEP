# ระบบจองตั๋วรถบัส YeEP

## 1. System Specification

➤ **บริการหลัก** คือ ระบบจองที่นั่งรถบัสภายในมหาวิทยาลัย, ตรวจสอบตารางเดินรถ, ติดตามตำแหน่งรถแบบเรียลไทม์, และจัดการข้อมูลบัญชีผู้ใช้รวมถึงรูปโปรไฟล์

➤ ถ้าผู้ใช้เพิ่งเข้าใช้บริการครั้งแรกจำเป็นต้องเป็นสมาชิกก่อน ถึงจะสามารถใช้บริการจองที่นั่งได้ การสมัครสมาชิกจำเป็นต้องกรอก อีเมล, รหัสผ่าน, ชื่อผู้ใช้, เบอร์โทร ซึ่งสามารถทำได้ผ่านทางออนไลน์ ผู้ใช้ที่เป็นสมาชิกเท่านั้นจึงจะสามารถใช้ระบบการจองได้ โดยต้องกรอกจำนวนที่นั่งที่ต้องการจาก นั้นยืนยันข้อมูลเพื่อเป็นการจองที่นั่ง หากต้องการยกเลิกการจอง ผู้ใช้สามารถยกเลิกการจองได้

➤ ผู้ใช้สามารถตรวจสอบข้อมูลสมาชิกและสถานะการจองผ่านหน้าโปรไฟล์

➤ ผู้ใช้สามารถเข้ามาใช้บริการดูตารางเดินรถล่วงหน้าได้

➤ ผู้ใช้สามารถอัพโหลดรูปโปรไฟล์ได้ โดยรูปภาพจะต้องมีขนาดไม่เกิน 5 MB และสามารถเลือกรูปจากแกลเลอรี่หรือถ่ายจากกล้องได้

➤ ผู้ใช้สามารถค้นหาเส้นทางรถบัสโดยเลือกต้นทางและปลายทาง ระบบจะแสดงสายรถที่ตรงกับเงื่อนไขการค้นหา

➤ ผู้ใช้สามารถเรียงลำดับรอบรถได้ตามเวลาออกเดินทางหรือจำนวนที่นั่งว่าง

➤ พนักงาน (คนขับรถ) จะบันทึกข้อมูลรายละเอียดการเดินรถประจำวัน เช่น จำนวนผู้โดยสาร สายรถ และอื่นๆ เพื่อนำไปทำการแจ้งข้อมูลของรถแบบเรียลไทม์ให้เจ้าของทราบ

➤ เมื่อถึงวันรับผู้โดยสาร พนักงานจะตรวจสอบข้อมูลของผู้จองและยืนยันการขึ้นรถ

➤ พนักงานสามารถแชร์ตำแหน่ง GPS ของรถได้ เพื่อให้ผู้ใช้สามารถติดตามตำแหน่งรถแบบเรียลไทม์ผ่านแผนที่

➤ ระบบมีการแจ้งเตือนผู้ใช้เมื่อการจองสำเร็จหรือถูกยกเลิก ผ่านช่องทาง Email, SMS และ Push Notification

---

## 2. ฟังก์ชันหลักของระบบ

### 2.1 ฟังก์ชันสำหรับผู้ใช้ทั่วไป (User)

| ฟังก์ชัน | รายละเอียด |
|----------|------------|
| สมัครสมาชิก | กรอกข้อมูล อีเมล, ชื่อผู้ใช้, รหัสผ่าน, เบอร์โทร |
| เข้าสู่ระบบ | ใช้ชื่อผู้ใช้และรหัสผ่าน |
| ค้นหาเส้นทาง | เลือกต้นทาง-ปลายทาง แสดงสายรถที่ตรงกัน |
| ดูตารางเดินรถ | แสดงตารางเวลาของแต่ละสายรถ |
| จองที่นั่ง | เลือกวันที่, รอบรถ, และหมายเลขที่นั่ง |
| ยกเลิกการจอง | ยกเลิกการจองที่ยังไม่ถึงกำหนดเดินทาง |
| ดูประวัติการจอง | แสดงรายการจองทั้งหมดพร้อมสถานะ |
| ติดตามรถ | ดูตำแหน่งรถแบบเรียลไทม์บนแผนที่ |
| จัดการโปรไฟล์ | อัพโหลดรูปภาพ, ดูข้อมูลบัญชี |

### 2.2 ฟังก์ชันสำหรับพนักงานขับรถ (Driver)

| ฟังก์ชัน | รายละเอียด |
|----------|------------|
| เข้าสู่ระบบ | ใช้บัญชีพนักงาน |
| แชร์ตำแหน่ง GPS | เปิด/ปิดการแชร์ตำแหน่งรถแบบเรียลไทม์ |
| ตรวจสอบรายการจอง | ดูรายการผู้โดยสารที่จองแต่ละรอบ |
| ยืนยันการขึ้นรถ | ตรวจสอบและยืนยันผู้โดยสาร |

---

## 3. เงื่อนไขการใช้งาน

| เงื่อนไข | รายละเอียด |
|----------|------------|
| การจองที่นั่ง | ต้องเป็นสมาชิกเท่านั้น |
| การยกเลิกการจอง | สามารถยกเลิกได้ก่อนถึงเวลาเดินรถ |
| รูปโปรไฟล์ | ขนาดไม่เกิน 5 MB |
| การติดตามรถ | ต้องเปิดใช้งานโดยพนักงานขับรถ |
| จำนวนที่นั่ง | สูงสุด 20 ที่นั่งต่อรอบ |

---

## 4. สายรถที่ให้บริการ

| สายรถ | เส้นทาง | เวลาให้บริการ |
|-------|---------|---------------|
| สายสีม่วง | หอพัก S4 → เรียนรวม | 07:05 - 09:10 น. |
| สายสีเขียว | หอพัก S16-S18 → เรียนรวม | 07:07 - 09:30 น. |
| สายสีส้ม | เรียนรวม → ขนส่ง | 07:25 - 08:55 น. |
| สายสีแดง | ขนส่ง → หอพัก S16-S18 | 09:10 - 20:40 น. |
| สายสีน้ำเงิน | ขนส่ง → โรงพยาบาล มทส. | 3 รอบ/วัน |
| สายสีเหลือง | หอพัก S13 → ตลาดหน้า ม. | 17:30 - 19:00 น. |

---

## 5. เทคโนโลยีที่ใช้

| ส่วน | เทคโนโลยี |
|------|-----------|
| Frontend (Mobile) | Flutter + Dart |
| Backend (API) | Spring Boot + Java |
| Database | PostgreSQL |
| GPS Server | Java Standalone Server |
| Map | Google Maps / WebView |

---

## 6. หลักการ OOP ที่ใช้ในระบบ

| หลักการ | การนำไปใช้ |
|---------|-----------|
| **Inheritance** | `BaseEntity` เป็น abstract class ที่ `User`, `Booking`, `BusRoute`, `BusTrip` สืบทอด |
| **Polymorphism** | `NotificationService` interface มี 3 implementations: `EmailNotificationService`, `SmsNotificationService`, `PushNotificationService` |
| **Aggregation** | `BusRoute` มี `BusTrip` หลายรายการ, `BusTrip` มี `Booking` หลายรายการ |
| **Data Sorting** | `BookingService.sortBookings()` เรียงข้อมูลตามวันที่, สถานะ, เส้นทาง หรือที่นั่ง |
| **Data Searching** | `BusRouteService.searchRoutes()` ค้นหาเส้นทางตามต้นทาง-ปลายทาง |
| **File Input** | อัพโหลดรูปโปรไฟล์ มีการตรวจสอบขนาดไฟล์ (≤5MB) |
